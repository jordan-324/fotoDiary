<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Photo Diary â€¢ Photo</title>
    <style>
      :root { color-scheme: light dark; }
      body { font-family: -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; margin: 16px; }
      main { max-width: 1100px; margin: 0 auto; display: grid; gap: 16px; }
      header { display: flex; gap: 8px; align-items: center; justify-content: space-between; }
      .actions { display: flex; gap: 8px; }
      button, a.button { padding: 10px 12px; border: 0; background: #2563eb; color: #fff; border-radius: 6px; cursor: pointer; text-decoration: none; }
      .name { font-size: 12px; color: #666; word-break: break-all; }
      figure { margin: 0; }
      img { max-width: 100%; height: auto; display: block; border-radius: 8px; }
    </style>
  </head>
  <body>
    <main>
      <header>
        <div class="name" id="name"></div>
        <div class="actions">
          <button id="backBtn" type="button">Return</button>
        </div>
      </header>
      <figure>
        <img id="photo" alt="Photo" src="" />
      </figure>
    </main>
    <script>
      function getParam(name) {
        const params = new URLSearchParams(window.location.search);
        return params.get(name);
      }
      const file = getParam('f');
      const nameEl = document.getElementById('name');
      const imgEl = document.getElementById('photo');
      const backBtn = document.getElementById('backBtn');
      
      if (!file) {
        nameEl.textContent = 'Missing file parameter';
      } else {
        const url = `/uploads/${encodeURIComponent(file)}`;
        nameEl.textContent = file;
        imgEl.src = url;
        imgEl.alt = file;
        
      }
      backBtn.addEventListener('click', () => {
        if (document.referrer && new URL(document.referrer).pathname === '/viewer.html') {
          window.history.back();
        } else {
          window.location.href = '/viewer.html';
        }
      });
    </script>
  </body>
  </html>


